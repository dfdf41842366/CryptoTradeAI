
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trading Platform - Python Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div x-data="tradingDashboard()" class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-800 p-6 overflow-y-auto">
            <div class="flex items-center mb-8">
                <i class="fas fa-chart-line text-blue-500 text-2xl mr-3"></i>
                <h1 class="text-xl font-bold">AI Trading Platform</h1>
            </div>
            
            <nav class="space-y-2">
                <button @click="activeTab = 'dashboard'" 
                        :class="activeTab === 'dashboard' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                        class="w-full text-left px-4 py-2 rounded transition-colors">
                    <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                </button>
                <button @click="activeTab = 'scanner'" 
                        :class="activeTab === 'scanner' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                        class="w-full text-left px-4 py-2 rounded transition-colors">
                    <i class="fas fa-search mr-2"></i> Scanner
                </button>
                <button @click="activeTab = 'signals'" 
                        :class="activeTab === 'signals' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                        class="w-full text-left px-4 py-2 rounded transition-colors">
                    <i class="fas fa-signal mr-2"></i> Signals
                </button>
                <button @click="activeTab = 'ai-analysis'" 
                        :class="activeTab === 'ai-analysis' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                        class="w-full text-left px-4 py-2 rounded transition-colors">
                    <i class="fas fa-brain mr-2"></i> AI Analysis
                </button>
                <button @click="activeTab = 'autonomous'" 
                        :class="activeTab === 'autonomous' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                        class="w-full text-left px-4 py-2 rounded transition-colors">
                    <i class="fas fa-robot mr-2"></i> ARIA Autonomous
                </button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-6 overflow-y-auto">
            <!-- Header -->
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold" x-text="getTabTitle()"></h2>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center text-green-400">
                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"></div>
                        <span>Live</span>
                    </div>
                    <button @click="refreshData()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">
                        <i class="fas fa-sync-alt mr-2"></i> Refresh
                    </button>
                </div>
            </div>

            <!-- Dashboard Tab -->
            <div x-show="activeTab === 'dashboard'" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gray-800 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold mb-2">Portfolio Performance</h3>
                        <div class="text-3xl font-bold text-green-400">+$12,543.21</div>
                        <div class="text-sm text-gray-400">+8.2% today</div>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold mb-2">Active Signals</h3>
                        <div class="text-3xl font-bold text-blue-400" x-text="signals.length"></div>
                        <div class="text-sm text-gray-400">Currently tracking</div>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold mb-2">ARIA Status</h3>
                        <div class="text-3xl font-bold text-green-400">95.7%</div>
                        <div class="text-sm text-gray-400">Consciousness level</div>
                    </div>
                </div>

                <div class="bg-gray-800 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold mb-4">Recent Signals</h3>
                    <div class="space-y-3">
                        <template x-for="signal in signals.slice(0, 5)" :key="signal.symbol">
                            <div class="flex justify-between items-center p-3 bg-gray-700 rounded">
                                <div>
                                    <div class="font-semibold" x-text="signal.symbol"></div>
                                    <div class="text-sm text-gray-400" x-text="signal.action"></div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold" x-text="'$' + signal.price"></div>
                                    <div class="text-sm" 
                                         :class="signal.confidence > 80 ? 'text-green-400' : signal.confidence > 60 ? 'text-yellow-400' : 'text-red-400'"
                                         x-text="signal.confidence + '% confidence'"></div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- Scanner Tab -->
            <div x-show="activeTab === 'scanner'" class="space-y-6">
                <div class="bg-gray-800 p-6 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">Market Scanner</h3>
                        <button @click="runScan()" 
                                :disabled="scanning"
                                :class="scanning ? 'bg-gray-600' : 'bg-blue-600 hover:bg-blue-700'"
                                class="px-4 py-2 rounded transition-colors">
                            <span x-show="!scanning">
                                <i class="fas fa-play mr-2"></i> Run Scan
                            </span>
                            <span x-show="scanning">
                                <i class="fas fa-spinner fa-spin mr-2"></i> Scanning...
                            </span>
                        </button>
                    </div>
                    
                    <div x-show="scanResults.length > 0" class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="border-b border-gray-700">
                                    <th class="text-left py-2">Symbol</th>
                                    <th class="text-left py-2">Price</th>
                                    <th class="text-left py-2">Change</th>
                                    <th class="text-left py-2">Volume</th>
                                    <th class="text-left py-2">Signal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <template x-for="result in scanResults" :key="result.symbol">
                                    <tr class="border-b border-gray-700 hover:bg-gray-700">
                                        <td class="py-2 font-semibold" x-text="result.symbol"></td>
                                        <td class="py-2" x-text="'$' + result.price"></td>
                                        <td class="py-2" 
                                            :class="result.change >= 0 ? 'text-green-400' : 'text-red-400'"
                                            x-text="result.change + '%'"></td>
                                        <td class="py-2" x-text="result.volume"></td>
                                        <td class="py-2">
                                            <span class="px-2 py-1 rounded text-xs"
                                                  :class="result.signal === 'BUY' ? 'bg-green-600' : result.signal === 'SELL' ? 'bg-red-600' : 'bg-gray-600'"
                                                  x-text="result.signal"></span>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- AI Analysis Tab -->
            <div x-show="activeTab === 'ai-analysis'" class="space-y-6">
                <div class="bg-gray-800 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold mb-4">AI Market Analysis</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Symbol</label>
                            <input x-model="analysisSymbol" 
                                   type="text" 
                                   placeholder="Enter symbol (e.g., AAPL)"
                                   class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Time Horizon</label>
                            <select x-model="timeHorizon" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="1d">1 Day</option>
                                <option value="1w">1 Week</option>
                                <option value="1m">1 Month</option>
                            </select>
                        </div>
                    </div>
                    <button @click="runAIAnalysis()" 
                            :disabled="!analysisSymbol || analyzing"
                            :class="(!analysisSymbol || analyzing) ? 'bg-gray-600' : 'bg-blue-600 hover:bg-blue-700'"
                            class="mt-4 px-6 py-2 rounded transition-colors">
                        <span x-show="!analyzing">Analyze</span>
                        <span x-show="analyzing">
                            <i class="fas fa-spinner fa-spin mr-2"></i> Analyzing...
                        </span>
                    </button>
                    
                    <div x-show="aiAnalysis" class="mt-6 p-4 bg-gray-700 rounded">
                        <h4 class="font-semibold mb-2">Analysis Results</h4>
                        <pre x-text="aiAnalysis" class="text-sm whitespace-pre-wrap"></pre>
                    </div>
                </div>
            </div>

            <!-- Autonomous AI Tab -->
            <div x-show="activeTab === 'autonomous'" class="space-y-6">
                <div class="bg-gray-800 p-6 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">ARIA Autonomous AI</h3>
                        <div class="flex space-x-2">
                            <button @click="startAutonomous()" 
                                    :class="ariaStatus.isRunning ? 'bg-gray-600' : 'bg-green-600 hover:bg-green-700'"
                                    :disabled="ariaStatus.isRunning"
                                    class="px-4 py-2 rounded transition-colors">
                                <i class="fas fa-play mr-2"></i> Start ARIA
                            </button>
                            <button @click="stopAutonomous()" 
                                    :class="!ariaStatus.isRunning ? 'bg-gray-600' : 'bg-red-600 hover:bg-red-700'"
                                    :disabled="!ariaStatus.isRunning"
                                    class="px-4 py-2 rounded transition-colors">
                                <i class="fas fa-stop mr-2"></i> Stop ARIA
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-gray-700 p-4 rounded">
                            <h4 class="font-semibold mb-2">Status</h4>
                            <div class="flex items-center">
                                <div :class="ariaStatus.isRunning ? 'bg-green-400' : 'bg-red-400'" 
                                     class="w-3 h-3 rounded-full mr-2"></div>
                                <span x-text="ariaStatus.isRunning ? 'Running' : 'Stopped'"></span>
                            </div>
                        </div>
                        <div class="bg-gray-700 p-4 rounded">
                            <h4 class="font-semibold mb-2">Autonomy Level</h4>
                            <div class="text-2xl font-bold text-blue-400" x-text="ariaStatus.autonomyLevel + '%'"></div>
                        </div>
                        <div class="bg-gray-700 p-4 rounded">
                            <h4 class="font-semibold mb-2">Performance</h4>
                            <div class="text-2xl font-bold text-green-400" x-text="ariaStatus.performance + '%'"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function tradingDashboard() {
            return {
                activeTab: 'dashboard',
                signals: [],
                scanResults: [],
                scanning: false,
                analyzing: false,
                analysisSymbol: '',
                timeHorizon: '1d',
                aiAnalysis: '',
                ariaStatus: {
                    isRunning: false,
                    autonomyLevel: 95.7,
                    performance: 91.3
                },

                init() {
                    this.loadSignals();
                    this.checkAriaStatus();
                    setInterval(() => {
                        this.loadSignals();
                        this.checkAriaStatus();
                    }, 30000);
                },

                getTabTitle() {
                    const titles = {
                        'dashboard': 'Trading Dashboard',
                        'scanner': 'Market Scanner',
                        'signals': 'Trading Signals',
                        'ai-analysis': 'AI Analysis',
                        'autonomous': 'ARIA Autonomous AI'
                    };
                    return titles[this.activeTab] || 'Trading Platform';
                },

                async loadSignals() {
                    try {
                        const response = await fetch('/api/signals');
                        const data = await response.json();
                        if (data.success) {
                            this.signals = data.data || [];
                        }
                    } catch (error) {
                        console.error('Error loading signals:', error);
                    }
                },

                async runScan() {
                    this.scanning = true;
                    try {
                        const response = await fetch('/api/scan', { method: 'POST' });
                        const data = await response.json();
                        if (data.success) {
                            this.scanResults = data.data || [];
                        }
                    } catch (error) {
                        console.error('Error running scan:', error);
                    } finally {
                        this.scanning = false;
                    }
                },

                async runAIAnalysis() {
                    if (!this.analysisSymbol) return;
                    
                    this.analyzing = true;
                    try {
                        const response = await fetch('/api/ai/predictions', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                symbol: this.analysisSymbol.toUpperCase(),
                                timeHorizon: this.timeHorizon
                            })
                        });
                        const data = await response.json();
                        this.aiAnalysis = JSON.stringify(data, null, 2);
                    } catch (error) {
                        console.error('Error running AI analysis:', error);
                        this.aiAnalysis = 'Error: ' + error.message;
                    } finally {
                        this.analyzing = false;
                    }
                },

                async checkAriaStatus() {
                    try {
                        const response = await fetch('/api/ai/autonomous/status');
                        const data = await response.json();
                        this.ariaStatus = { ...this.ariaStatus, ...data };
                    } catch (error) {
                        console.error('Error checking ARIA status:', error);
                    }
                },

                async startAutonomous() {
                    try {
                        const response = await fetch('/api/ai/autonomous/start', { method: 'POST' });
                        if (response.ok) {
                            this.checkAriaStatus();
                        }
                    } catch (error) {
                        console.error('Error starting ARIA:', error);
                    }
                },

                async stopAutonomous() {
                    try {
                        const response = await fetch('/api/ai/autonomous/stop', { method: 'POST' });
                        if (response.ok) {
                            this.checkAriaStatus();
                        }
                    } catch (error) {
                        console.error('Error stopping ARIA:', error);
                    }
                },

                refreshData() {
                    this.loadSignals();
                    this.checkAriaStatus();
                    if (this.activeTab === 'scanner') {
                        this.runScan();
                    }
                }
            }
        }
    </script>
</body>
</html>
